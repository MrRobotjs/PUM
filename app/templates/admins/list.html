<!-- File: app/templates/admins/list.html -->
{% extends "base.html" %}
{% block title %}{{ super() }} - Manage Admins{% endblock %}
{% block content %}
<div class="container mx-auto px-4 py-2">
    <div class="flex flex-col sm:flex-row justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">Manage Admins</h1>
        <button class="btn btn-primary mt-4 sm:mt-0" onclick="create_admin_modal.showModal()">
            <i class="fa-solid fa-user-plus mr-2"></i> Create New Admin
        </button>
    </div>

    <div id="admin-list-container"
         hx-get="{{ url_for('admins.list_admins') }}"
         hx-trigger="load, refreshAdminList from:body"
         hx-swap="innerHTML">
        <div class="text-center p-8"><span class="loading loading-lg loading-spinner"></span><p>Loading admins...</p></div>
    </div>
</div>

<!-- Create Admin Modal -->
<dialog id="create_admin_modal" class="modal modal-bottom sm:modal-middle">
    <div class="modal-box">
        <form method="dialog"><button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button></form>
        <h3 class="font-bold text-lg mb-4">Create New Admin</h3>
        
        <form id="createAdminForm"
              hx-post="{{ url_for('admins.create_admin') }}"
              hx-target="this"
              hx-swap="outerHTML"
              hx-indicator="#create_admin_loader"
              hx-on::after-request="if(event.detail.successful) { create_admin_modal.close(); this.reset(); }">
              
            {# The form content will live in its own partial #}
            {% include 'admins/_create_admin_modal_form_content.html' %}
        </form>
    </div>
</dialog>
{% endblock %}